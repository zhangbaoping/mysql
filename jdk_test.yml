- name: copy java_jdk.tar.gz remote hosts
  copy: src=/package/java_jdk.tar.gz dest=/bubidata/server/
- name: copy java_jdk.tar.gz remote hosts
  copy: src=/package/java_jdk.tar.gz dest=/bubidata/server/
- name: tar java_jdk.tar.gz
  shell: chdir=/bubidata/server/ tar zxf java_jdk.tar.gz
- name: soft link
  file: src=/package/java dest=/bubidata/server/java state=link
- name: java_profile config
  shell: /bin/echo {{ item }} >> /etc/profile && source /etc/profile
  with_items:
    - export JAVA_HOME=/bubidata/server/java
    - export JRE_HOME=/bubidata/server/java/jre
    - export CLASSPATH=.:\$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:\$JRE_HOME/lib:\$CLASSPATH
    - export PATH=\$JAVA_HOME/bin:\$PATH
    